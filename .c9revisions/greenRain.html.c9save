{"ts":1352218430837,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!doctype html>\r\n<html>\r\n\t<head>\r\n\t\t<meta http-equiv=\"content-type\" content='text/html; charset=utf-8'/>\r\n\t\t<title>Keyboard bindings</title>\r\n\t\t<style>\r\n\t\t\r\n\t\t\tbody {\r\n\t\t\t\tfont-family: helvetica, arial;\r\n\t\t\t\tfont-size: small;\r\n\t\t\t}\r\n\t\t\r\n\t\t\t#canvas {\r\n\t\t\t\tborder: 1px solid #0c0c0c;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ta#restartLink, a#toggleAccelerometerLink {\r\n\t\t\t\tfont-family: helvetica; \r\n\t\t\t\tfont-size: large;\r\n\t\t\t\ttext-decoration: none;\r\n\t\t\t\tcolor: blue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ta#restartLink, a#toggleAccelerometerLink {\r\n\t\t\t\ttext-decoration: underline;\r\n\t\t\t}\r\n\t\t</style>\r\n\t</head>\r\n\t<body>\r\n\t\t<canvas id=\"canvas\" width=\"500\" height=\"400\">\r\n\t\t\tget a better browser ASAP\t\t\r\n\t\t</canvas>\r\n\t\t<div id=\"debug\">\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div id=\"debugTouch\">\r\n\t\t\r\n\t\t</div>\r\n\t\t<div id=\"score\">\r\n\t\t\r\n\t\t</div>\r\n\t\t<p>\r\n\t\t\t<a style=\"visibility: hidden\" id=\"restartLink\" href=\"#\" onclick=\"startGame();\">Restart Game</a>\r\n\t\t\t<br/>\r\n\t\t\t<a style=\"visibility: visible\" id=\"toggleAccelerometerLink\" href=\"#\" onclick=\"toggleAccelerometer();\">Toggle accelerometer</a>\r\n\t\t</p>\r\n\t\t<script type=\"text/javascript\" charset=\"utf-8\">\r\n\t\t\t\r\n\t\t\tfunction randomNumber(max){\r\n\t\t\t\treturn Math.floor(Math.random() * max + 1);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction clearChildren(parentNode){\r\n\t\t\t\tif(parentNode.childNodes){\r\n\t\t\t\t\twhile(parentNode.childNodes.length){\r\n\t\t\t\t\t\tparentNode.removeChild(parentNode.childNodes[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction appendText(parentNode,text){\r\n\t\t\t\tparentNode.appendChild(document.createTextNode(text));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getMousePosition(canvas, event){\r\n\t\t\t\tvar rectangle = canvas.getBoundingClientRect();\r\n\t\t\t\tvar root = document.documentElement;\r\n\t\t\t\tvar mouseX = event.clientX - rectangle.top - root.scrollTop;\r\n\t\t\t\tvar mouseY = event.clientY - rectangle.left - root.scrollLeft;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: mouseX\r\n\t\t\t\t\t, y: mouseY\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction rectangle(x,y,width,height){\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.rect(x,y,width,height);\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.fill();\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction circle(x,y,radius){\r\n\t\t\t\tcontext.beginPath();\r\n\t\t\t\tcontext.arc(x,y,radius,0,Math.PI * 2, true);\r\n\t\t\t\tcontext.closePath();\r\n\t\t\t\tcontext.fill();\r\n\t\t\t\tcontext.stroke();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction Tomato(startX,startY){\r\n\t\t\t\tthis.x = startX;\r\n\t\t\t\tthis.y = startY;\r\n\t\t\t\tthis.isActive = true;\r\n\t\t\t\tthis.radius = 10;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tTomato.prototype.collided = function(x,y,xt,yt){\r\n\t\t\t\treturn (Math.abs(x - this.x) <= this.radius \r\n\t\t\t\t\t\t|| Math.abs(xt - this.x) <= this.radius\r\n\t\t\t\t\t\t|| Math.abs((((xt-x)/2)+x) - this.x) <= this.radius ) \r\n\t\t\t\t\t&& (Math.abs(y - this.y) <= this.radius \r\n\t\t\t\t\t\t|| Math.abs(yt - this.y) <= this.radius\r\n\t\t\t\t\t\t|| Math.abs((((yt-y)/2)+y) - this.y) <= this.radius );\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tTomato.prototype.draw = function(){\r\n\t\t\t\tif(!this.isActive){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tcontext.fillStyle = \"red\";\r\n\t\t\t\tcontext.strokeStyle = \"green\";\r\n\t\t\t\tcircle(this.x,this.y,this.radius);\r\n\t\t\t\tcontext.restore();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tBugger.prototype = new Tomato(0,0);\r\n\t\t\tBugger.prototype.constructor = Bugger;\r\n\t\t\tBugger.prototype.parent = Tomato.prototype;\r\n\t\t\t\r\n\t\t\tfunction Bugger(startX, startY){\r\n\t\t\t\tthis.x = startX;\r\n\t\t\t\tthis.y = startY;\r\n\t\t\t\tthis.yOffset = 0;\r\n\t\t\t\tthis.radius = 20;\r\n\t\t\t\tthis.DX = 3;\r\n\t\t\t\tthis.DY = 3;\r\n\t\t\t\tthis.onPath = 0;\r\n\t\t\t\tthis.lastDirection = 1;\r\n\t\t\t\tthis.resetRaindrops();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tBugger.prototype.draw = function(){\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tcontext.fillStyle = \"green\";\r\n\t\t\t\tcontext.strokeStyle = \"blue\";\r\n\t\t\t\tcircle(this.x,this.y,this.radius);\r\n\t\t\t\tcontext.restore();\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tBugger.prototype.moveUp = function (){\r\n\t\t\t\tif(this.y - this.DY >= 0){\r\n\t\t\t\t\tthis.y -= this.DY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tBugger.prototype.moveDown = function (){\r\n\t\t\t\tif(this.y + this.radius + this.DY <= HEIGHT){\r\n\t\t\t\t\tthis.y += this.DY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tBugger.prototype.moveLeft = function (){\r\n\t\t\t\tif(this.x - this.DX >= 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.x -= this.DX;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tBugger.prototype.moveRight = function (){\r\n\t\t\t\tif(this.x + this.radius + this.DX <= WIDTH){\r\n\t\t\t\t\tthis.x += this.DX;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tBugger.prototype.resetRaindrops = function(){\r\n\t\t\t\tif(this.x < 0 || this.y > HEIGHT){\r\n\t\t\t\t\tthis.yOffset = randomNumber(MAX_Y_OFFSET);\r\n\t\t\t\t\tthis.y = 0;\r\n\t\t\t\t\tthis.x = Math.floor( (-1 * this.yOffset)/RAIN_SLOPE );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tBugger.prototype.slide = function(){\r\n\t\t\t\tthis.x -= 1;\r\n\t\t\t\tthis.y = RAIN_SLOPE * this.x + this.yOffset;\r\n\t\t\t\tthis.resetRaindrops();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction Character(startX,startY){\r\n\t\t\t\tthis.x = startX;\r\n\t\t\t\tthis.y = startY;\r\n\t\t\t\tthis.strokeStyle = \"blue\";\r\n\t\t\t\tthis.width = 30;\r\n\t\t\t\tthis.height = 50;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tCharacter.prototype.powerUpCue = function(){\r\n\t\t\t\twindow.setTimeout(blinkCharacterStroke1,250);\r\n\t\t\t\twindow.setTimeout(blinkCharacterStroke2,500);\r\n\t\t\t\twindow.setTimeout(blinkCharacterStroke1,750);\r\n\t\t\t\twindow.setTimeout(blinkCharacterStroke2,1000);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction blinkCharacterStroke1(){\r\n\t\t\t\tcharacter.strokeStyle = \"red\";\r\n\t\t\t\tleveledUp = true;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction blinkCharacterStroke2(){\r\n\t\t\t\tcharacter.strokeStyle = \"blue\";\r\n\t\t\t\tleveledUp = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tCharacter.prototype.detectCollisions = function(){\r\n\t\t\t\tfor(var i =0; i < redDots.length; i++){\r\n\t\t\t\t\tif(redDots[i].isActive){\r\n\t\t\t\t\t\tif(redDots[i].collided(this.x,this.y,this.x+this.width,this.y+this.height)){\r\n\t\t\t\t\t\t\tredDots[i].isActive = false;\r\n\t\t\t\t\t\t\tcollectedTomatoes++;\r\n\t\t\t\t\t\t\ttotalDots++;\r\n\t\t\t\t\t\t\toutputScore();\r\n\t\t\t\t\t\t\tthis.powerUpCue();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tCharacter.prototype.moveUp = function (){\r\n\t\t\t\tif(this.y - DY >= 0){\r\n\t\t\t\t\tthis.y -= (accelerometerToggled? Math.floor(DY * Math.abs(tiltFB/120) ): DY);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tCharacter.prototype.moveDown = function (){\r\n\t\t\t\tif(this.y + this.height + DY <= HEIGHT){\r\n\t\t\t\t\tthis.y += (accelerometerToggled? Math.floor(DY * Math.abs(tiltFB+90)/60 ) : DY);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tCharacter.prototype.moveLeft = function (){\r\n\t\t\t\tif(this.x - DX >= 0)\r\n\t\t\t\t{\r\n\t\t\t\t\tthis.x -= (accelerometerToggled? Math.floor(DX * Math.abs(tiltLR/40) ) : DX);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tCharacter.prototype.moveRight = function (){\r\n\t\t\t\tif(this.x + this.width + DX <= WIDTH){\r\n\t\t\t\t\tthis.x += (accelerometerToggled? Math.floor(DX * Math.abs(tiltLR/40) ) : DX);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tCharacter.prototype.draw = function(){\r\n\t\t\t\tcontext.save();\r\n\t\t\t\tcontext.fillStyle = \"black\";\r\n\t\t\t\tcontext.strokeStyle = this.strokeStyle;\r\n\t\t\t\tif(tiltLR > 0){\r\n\t\t\t\t\tthis.moveLeft();\r\n\t\t\t\t}\r\n\t\t\t\tif(tiltLR < 0){\r\n\t\t\t\t\tthis.moveRight();\r\n\t\t\t\t}\r\n\t\t\t\tif(tiltFB < -90){\r\n\t\t\t\t\tthis.moveUp();\r\n\t\t\t\t}\r\n\t\t\t\tif(tiltFB > -90){\r\n\t\t\t\t\tthis.moveDown();\r\n\t\t\t\t}\r\n\t\t\t\trectangle(this.x,this.y,this.width,this.height);\r\n\t\t\t\tcontext.restore();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tCharacter.prototype.moveTo = function(coordinates){\r\n\t\t\t\tthis.x = coordinates.x - Math.floor(this.width/2);\r\n\t\t\t\tthis.y = coordinates.y - Math.floor(this.height/2);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar context;\r\n\t\t\tconst DX = 5;\r\n\t\t\tconst DY = 5;\r\n\t\t\tconst HEIGHT = 400;\r\n\t\t\tconst WIDTH = 500;\r\n\t\t\tconst RAIN_SLOPE = -2;\r\n\t\t\tconst FRAME_RATE = 10;\r\n\t\t\tconst GAME_RATE = 10;\r\n\t\t\tconst MAX_Y_OFFSET = 1400;\r\n\t\t\tconst DEBUG = true;\r\n\t\t\tvar gameLogicID = null;\r\n\t\t\tvar graphicsID = null;\r\n\t\t\tvar collectedTomatoes = 0;\r\n\t\t\tvar totalDots = 0;\r\n\t\t\tvar leveledUp = false;\r\n\t\t\tvar drawingStarted = false;\r\n\t\t\tvar tiltLR = 0;\r\n\t\t\tvar tiltFB = -90;\r\n\t\t\tvar accelerometerToggled = false;\r\n\t\t\t\r\n\t\t\tvar redDots = [\r\n\t\t\t\tnew Tomato(randomNumber(WIDTH), randomNumber(HEIGHT))\r\n\t\t\t\t, new Tomato(randomNumber(WIDTH), randomNumber(HEIGHT))\r\n\t\t\t\t, new Tomato(randomNumber(WIDTH), randomNumber(HEIGHT))\r\n\t\t\t];\r\n\t\t\tvar buggers = [new Bugger(randomNumber(WIDTH,HEIGHT))\r\n\t\t\t\t, new Bugger(randomNumber(WIDTH,HEIGHT))\r\n\t\t\t\t, new Bugger(randomNumber(WIDTH,HEIGHT))\r\n\t\t\t];\r\n\r\n\t\t\tvar character = new Character(randomNumber(WIDTH), randomNumber(HEIGHT));\r\n\t\t\t\r\n\t\t\tfunction keyDown(event){\r\n\t\t\t\tswitch(event.keyCode){\r\n\t\t\t\t\tcase 87: //w\r\n\t\t\t\t\tcase 38: //up arrow\r\n\t\t\t\t\t\tcharacter.moveUp();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 83: //s\r\n\t\t\t\t\tcase 40: //down arrow\r\n\t\t\t\t\t\tcharacter.moveDown();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 65: //a\r\n\t\t\t\t\tcase 37: //left arrow\r\n\t\t\t\t\t\tcharacter.moveLeft();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 68: //d\r\n\t\t\t\t\tcase 39: //right arrow\r\n\t\t\t\t\t\tcharacter.moveRight();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction clear(){\r\n\t\t\t\tcontext.clearRect(0,0,WIDTH,HEIGHT);\r\n\t\t\t\tif(leveledUp){\r\n\t\t\t\t\tblink();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction drawString(ctx, text, textColor, rotation, font, fontSize) {\r\n\t\t\t\tvar lines = text.split(\"\\n\");\r\n\t\t\t\tvar posY = 0;\r\n\t\t\t\tif (!rotation) rotation = 0;\r\n\t\t\t\tif (!font) font = \"'helvetica'\";\r\n\t\t\t\tif (!fontSize) fontSize = 16;\r\n\t\t\t\tif (!textColor) textColor = '#000000';\r\n\t\t\t\tposY = Math.floor( (HEIGHT - (fontSize*lines.length) )/2 );\r\n\t\t\t\tctx.save();\r\n\t\t\t\tctx.font = fontSize + \"px \" + font;\r\n\t\t\t\tctx.strokeStyle = textColor;\r\n\t\t\t\tctx.translate(0, posY);\r\n\t\t\t\tctx.rotate(rotation * Math.PI / 180);\r\n\t\t\t\tfor (i = 0; i < lines.length; i++) {\r\n\t\t\t\t\tctx.translate(Math.floor( (WIDTH - context.measureText(text).width)/2 ), 0);\r\n\t\t\t\t\tctx.strokeText(lines[i],0, i*fontSize);\r\n\t\t\t\t}\r\n\t\t\t\tctx.restore();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction blink(){\r\n\t\t\t\tvar scoreText = collectedTomatoes==0? \"Level UP!\\n\"+ totalDots +\" collected so far...\": collectedTomatoes + ' collected\\n... ' + (redDots.length - collectedTomatoes) + ' more to go';\r\n\t\t\t\tdrawString(context,scoreText,'gray',0,'helvetica',30);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction draw(){\r\n\t\t\t\tif(drawingStarted)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tdrawingStarted = true;\r\n\t\t\t\tclear();\r\n\t\t\t\tfor(var i = 0; i < redDots.length; i++){\r\n\t\t\t\t\tredDots[i].draw();\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 0; i < buggers.length; i++){\r\n\t\t\t\t\tbuggers[i].draw();\r\n\t\t\t\t}\r\n\t\t\t\tcharacter.draw();\r\n\t\t\t\tdrawingStarted = false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction gameLogic(){\r\n\t\t\t\tcharacter.detectCollisions();\r\n\t\t\t\tfor(var i = 0; i< buggers.length; i++){\r\n\t\t\t\t\tbuggers[i].slide();\r\n\t\t\t\t\tif(buggers[i].collided(character.x,character.y,character.x+character.width,character.y+character.height))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstopGame();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(collectedTomatoes>= redDots.length){\r\n\t\t\t\t\tlevelUp();\r\n\t\t\t\t}\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction debugMouseMove(mousePosition){\r\n\t\t\t\tif(DEBUG){\r\n\t\t\t\t\tvar debugDiv = document.getElementById('debug');\r\n\t\t\t\t\tclearChildren(debugDiv);\r\n\t\t\t\t\tappendText(debugDiv,'<'+ mousePosition.x +','+ mousePosition.y +'>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction outputScore(msg){\r\n\t\t\t\tvar scoreDiv = document.getElementById('score');\r\n\t\t\t\tvar scoreText = collectedTomatoes + ' collected ... ' + (redDots.length - collectedTomatoes) + ' more to go';\r\n\t\t\t\tclearChildren(scoreDiv);\r\n\t\t\t\tif(msg){\r\n\t\t\t\t\tappendText(scoreDiv, msg);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tappendText(scoreDiv, scoreText);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction setupHardwareControlsLayer(canvas){\r\n\t\t\t\tcanvas.addEventListener('mousemove', function(event){\r\n\t\t\t\t\tvar mousePosition = getMousePosition(canvas,event);\r\n\t\t\t\t\tdebugMouseMove(mousePosition);\r\n\t\t\t\t\tcharacter.moveTo(mousePosition);\r\n\t\t\t\t}, false);\r\n\t\t\t\tcanvas.addEventListener('touchmove', function(event){\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tvar touchPosition = {x: event.targetTouches[0].pageX, y: event.targetTouches[0].pageY};\r\n\t\t\t\t\tdebugMouseMove(touchPosition);\r\n\t\t\t\t\tcharacter.moveTo(touchPosition);\r\n\t\t\t\t}, false);\r\n\t\t\t\twindow.addEventListener('keydown',keyDown,true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction levelUp(){\r\n\t\t\t\tbuggers[buggers.length] = new Bugger(randomNumber(WIDTH), randomNumber(HEIGHT));\r\n\t\t\t\tredDots[redDots.length] = new Tomato();\r\n\t\t\t\tcollectedTomatoes = 0;\r\n\t\t\t\tfor(var i = 0; i < redDots.length; i++){\r\n\t\t\t\t\tredDots[i].x = randomNumber(WIDTH);\r\n\t\t\t\t\tredDots[i].y = randomNumber(HEIGHT);\r\n\t\t\t\t\tredDots[i].isActive = true;\r\n\t\t\t\t}\r\n\t\t\t\toutputScore('Leveled up!!! now playing level: '+ (redDots.length - 2 ));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction stopGame(){\r\n\t\t\t\toutputScore('your record: ' + totalDots);\r\n\t\t\t\tif(gameLogicID){\r\n\t\t\t\t\twindow.clearInterval(gameLogicID);\r\n\t\t\t\t}\r\n\t\t\t\tif(graphicsID){\r\n\t\t\t\t\twindow.clearInterval(graphicsID);\r\n\t\t\t\t}\r\n\t\t\t\tgameLogicID = null;\r\n\t\t\t\tgraphicsID = null;\r\n\t\t\t\tdocument.getElementById('restartLink').setAttribute('style','visibility: visible');\r\n\t\t\t\tleveledUp = false;\r\n\t\t\t\tdraw();\r\n\t\t\t\tvar scoreText = \"Total score: \"+ totalDots +\"\\nRestart the game!\";\r\n\t\t\t\tdrawString(context,scoreText,'gray',0,'helvetica',30);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction startGame(){\r\n\t\t\t\tstopGame();\r\n\t\t\t\tcollectedTomatoes = 0;\r\n\t\t\t\ttotalDots = 0;\r\n\t\t\t\tredDots = [\r\n\t\t\t\t\tnew Tomato(randomNumber(WIDTH), randomNumber(HEIGHT))\r\n\t\t\t\t\t, new Tomato(randomNumber(WIDTH), randomNumber(HEIGHT))\r\n\t\t\t\t\t, new Tomato(randomNumber(WIDTH), randomNumber(HEIGHT))\r\n\t\t\t\t];\r\n\t\t\t\tbuggers = [new Bugger(randomNumber(WIDTH,HEIGHT))\r\n\t\t\t\t\t, new Bugger(randomNumber(WIDTH,HEIGHT))\r\n\t\t\t\t\t, new Bugger(randomNumber(WIDTH,HEIGHT))\r\n\t\t\t\t];\r\n\t\t\t\tgameLogicID = window.setInterval(gameLogic,GAME_RATE);\r\n\t\t\t\tgraphicsID = setInterval(draw,FRAME_RATE);\r\n\t\t\t\tdocument.getElementById('restartLink').setAttribute('style','visibility: hidden')\r\n\t\t\t\treturn graphicsID;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction deviceMotionHandler(event){\r\n\t\t\t\tvar acceleration = event.accelerationIncludingGravity;\r\n\t\t\t\tvar facingUp = -1;\r\n\t\t\t\tif (acceleration.z > 0) {\r\n\t\t\t\t\tfacingUp = +1;\r\n\t\t\t\t}\r\n\t\t\t\ttiltLR = Math.round(((acceleration.x) / 9.81) * -90);\r\n\t\t\t\ttiltFB = Math.round(((acceleration.y + 9.81) / 9.81) * 90 * facingUp);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction toggleAccelerometer(){\r\n\t\t\t\tif(window.DeviceMotionEvent){\r\n\t\t\t\t\tif(!accelerometerToggled){\r\n\t\t\t\t\t\twindow.addEventListener('devicemotion', deviceMotionHandler, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\twindow.removeEventListener('devicemotion', deviceMotionHandler, false);\r\n\t\t\t\t\t\ttiltLR = 0;\r\n\t\t\t\t\t\ttiltFB = -90;\r\n\t\t\t\t\t}\r\n\t\t\t\t\taccelerometerToggled = !accelerometerToggled;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\talert('This device does not support accelerometer sensors on HTML5');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction init(canvasID){\r\n\t\t\t\tvar canvas = document.getElementById(canvasID);\r\n\t\t\t\tcontext = document.getElementById(canvasID).getContext('2d');\r\n\t\t\t\tsetupHardwareControlsLayer(canvas);\r\n\t\t\t\tdebugMouseMove({ x: 0, y: 0});\r\n\t\t\t\toutputScore();\r\n\t\t\t\treturn startGame();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tgraphicsID = init('canvas');\r\n\t\t</script>\r\n\t</body>\r\n</html>"]],"start1":0,"start2":0,"length1":0,"length2":14069}]],"length":14069}
